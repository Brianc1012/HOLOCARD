<!DOCTYPE html>
<html>
<head>
    <title>Test Update API</title>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
    <h1>Test Update Card API</h1>
    <button onclick="testAPI()">Test API Call</button>
    
    <script>
    async function testAPI() {
        const testData = {
            cardId: 1,
            cardType: 'Personal',
            firstName: 'John',
            lastName: 'UpdatedTest',
            email: 'john.updated@test.com',
            contactNo: '9876543210',
            address: 'Updated Test Address'
        };
        
        console.log('Testing API with data:', testData);
        
        try {
            const response = await fetch('./api/update_card.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(testData)
            });
            
            console.log('Response status:', response.status);
            console.log('Response headers:', response.headers);
            
            const text = await response.text();
            console.log('Raw response:', text);
            
            try {
                const result = JSON.parse(text);
                console.log('Parsed result:', result);
                
                if (result.success) {
                    Swal.fire('Success!', 'API call succeeded', 'success');
                } else {
                    Swal.fire('API Error', result.error || 'Unknown error', 'error');
                }
            } catch (parseError) {
                console.error('JSON parse error:', parseError);
                Swal.fire('Parse Error', 'Response was not valid JSON: ' + text, 'error');
            }
            
        } catch (error) {
            console.error('Fetch error:', error);
            Swal.fire('Network Error', error.message, 'error');
        }
    }
    </script>
</body>
</html>
