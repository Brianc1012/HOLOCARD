<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Simple QR Generation</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .qr-container {
            margin: 10px 0;
            text-align: center;
        }
        .qr-info {
            margin: 10px 0;
            padding: 10px;
            background: #f5f5f5;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>üîç QR Code Generation Test</h1>
    
    <div class="test-section">
        <h2>‚úÖ Simple Card ID QR (Recommended)</h2>
        <div id="qr-simple" class="qr-container"></div>
        <div class="qr-info">
            <strong>Data:</strong> <span id="data-simple"></span><br>
            <strong>Complexity:</strong> Very Low<br>
            <strong>Scan Speed:</strong> Fastest
        </div>
    </div>

    <div class="test-section">
        <h2>‚ö†Ô∏è Complex JSON QR (Current Issue)</h2>
        <div id="qr-complex" class="qr-container"></div>
        <div class="qr-info">
            <strong>Data:</strong> <span id="data-complex"></span><br>
            <strong>Complexity:</strong> Very High<br>
            <strong>Scan Speed:</strong> Slow/Difficult
        </div>
    </div>

    <div class="test-section">
        <h2>üì± Test Scanner Integration</h2>
        <p>After generating QR codes above, test with your scanner:</p>
        <ol>
            <li>Open <a href="pages/scanner.html" target="_blank">Scanner Page</a></li>
            <li>Point camera at the "Simple Card ID QR" above</li>
            <li>Verify it scans quickly and fetches card data</li>
        </ol>
    </div>

    <script>
        // Test data
        const testCardData = {
            HoloCardID: 15,
            CardName: "Test User",
            CardTypeText: "Personal",
            Email: "test@example.com",
            ContactNo: "1234567890",
            Address: "123 Test Street",
            BirthDate: "1990-01-01"
        };

        // Generate simple QR (just card ID)
        const simpleData = testCardData.HoloCardID.toString();
        document.getElementById('data-simple').textContent = simpleData;
        new QRCode(document.getElementById('qr-simple'), {
            text: simpleData,
            width: 200,
            height: 200,
            correctLevel: QRCode.CorrectLevel.M,
            margin: 3
        });

        // Generate complex QR (full JSON - problematic)
        const complexData = JSON.stringify({
            type: "holocard-ar",
            version: "1.0",
            cardId: testCardData.HoloCardID,
            profile: testCardData,
            ar: {
                markerType: "qr",
                trackingMode: "stable",
                renderDistance: 2
            },
            generated: new Date().toISOString()
        });
        document.getElementById('data-complex').textContent = complexData.substring(0, 100) + '...';
        new QRCode(document.getElementById('qr-complex'), {
            text: complexData,
            width: 200,
            height: 200,
            correctLevel: QRCode.CorrectLevel.H,
            margin: 2
        });

        console.log('‚úÖ Test QR codes generated');
        console.log('Simple data length:', simpleData.length);
        console.log('Complex data length:', complexData.length);
    </script>
</body>
</html>
