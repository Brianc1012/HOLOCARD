<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Main Menu</title>
    <link rel="stylesheet" href="../styles/mainMenu.css">
    <!-- Add any additional required scripts/styles for scanner.html here -->
    <!-- Add scanner dependencies -->
    <link rel="stylesheet" href="../styles/scanner.css">
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/jeromeetienne/ar.js@3.3.2/aframe/build/aframe-ar.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js"></script>
    <script src="../scripts/scanner.js" defer></script>
</head>

<body>
<div class="mainTitleGlow">HoloCard</div>
<div class="mainMenuContainer">
    <!-- Left Side: Logo and Title -->
    <div class="logoContainer">
        <img src="../public/images/holocardLogo.svg" alt="Logo" class="logo" />
        <h1>Main Menu</h1>
    </div>    <!-- Right Side: Buttons -->
    <div class="menuItems">
        <ul>
            <li>
                <a href="../pages/holocards.html">My HoloCard</a>
            </li>
            <li>
                <a href="#" id="showScannerMenuBtn">Scan HoloCard</a>
            </li>
            <li>
                <a href="../pages/contacts.html">My Contacts</a>
            </li>
        </ul>
        <a href="../pages/login.html" class="logoutButton">
            Logout
        </a>
    </div>
</div>

<!-- Inline scanner.html content, hidden by default -->
<div id="scannerInlineSection" style="display:none;">
  <div class="scannerPageContainer">
    <div class="backandlabel">
      <button class="backButton" id="hideScannerBtn">Back</button>
      <h1 class="AppName">HoloCard</h1>
    </div>
    <h1 class="label">Scanner</h1>
    <div class="scannerContainer">
      <div class="camScanner">
        <div class="arSceneContainer" style="width:100%;height:640px;min-height:400px;position:relative;">
          <div id="scanAreaOverlay" style="position:absolute;top:50%;left:50%;width:180px;height:180px;transform:translate(-50%,-50%);border:2.5px dashed #00ffae;border-radius:18px;box-shadow:0 0 16px #00ffae55;pointer-events:none;z-index:10;transition:border-color 0.2s;">
            <div style="position:absolute;top:-2.5px;left:-2.5px;width:24px;height:24px;border-top:4px solid #00ffae;border-left:4px solid #00ffae;border-radius:8px 0 0 0;"></div>
            <div style="position:absolute;top:-2.5px;right:-2.5px;width:24px;height:24px;border-top:4px solid #00ffae;border-right:4px solid #00ffae;border-radius:0 8px 0 0;"></div>
            <div style="position:absolute;bottom:-2.5px;left:-2.5px;width:24px;height:24px;border-bottom:4px solid #00ffae;border-left:4px solid #00ffae;border-radius:0 0 0 8px;"></div>
            <div style="position:absolute;bottom:-2.5px;right:-2.5px;width:24px;height:24px;border-bottom:4px solid #00ffae;border-right:4px solid #00ffae;border-radius:0 0 8px 0;"></div>
          </div>
          <a-scene
            embedded
            vr-mode-ui="enabled: false"
            arjs="sourceType: webcam; debugUIEnabled: false; trackingMethod: best; detectionMode: mono_and_matrix; matrixCodeType: 3x3;"
            renderer="logarithmicDepthBuffer: true; antialias: true; colorManagement: true; sortObjects: true;"
            id="arScene"
            style="width:100%;height:100%;"
          >
            <a-marker type="pattern" preset="custom" url="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==" 
                      smooth="true" smoothCount="10" smoothTolerance="0.01" smoothThreshold="5"
                      id="arMarker">
              <a-entity id="arCardInfo"></a-entity>
            </a-marker>
            <a-entity camera look-controls="enabled: false" cursor="rayOrigin: mouse" raycaster="objects: .clickable"></a-entity>
          </a-scene>
        </div>
        <div id="scanStatus" style="width:100%;text-align:center;margin-top:0.5rem;font-size:1rem;color:#fff;font-family:'Poppins',sans-serif;letter-spacing:0.05rem;min-height:1.5em;">
          Ready to scan...
        </div>
        <div class="scannedDetails wide">
          <h1 class="scannedDetailsLabel">Scanned Details</h1>
          <div class="photoLogoContainer">
            <img src="../public/images/holocardLogo.svg" alt="Logo" class="photoLogo" />
          </div>
          <div class="details details-grid">
            <div class="details-row">
              <span class="detailsLabel" id="cardType">Card Type: None</span>
              <button class="copy-btn" data-copy-target="cardType" title="Copy">ðŸ“‹</button>
            </div>
            <div class="details-row">
              <span class="detailsLabel" id="company">Company: None</span>
              <button class="copy-btn" data-copy-target="company" title="Copy">ðŸ“‹</button>
            </div>
            <div class="details-row">
              <span class="detailsLabel" id="contactPerson">Contact Person: None</span>
              <button class="copy-btn" data-copy-target="contactPerson" title="Copy">ðŸ“‹</button>
            </div>
            <div class="details-row">
              <span class="detailsLabel" id="name">Name: None</span>
              <button class="copy-btn" data-copy-target="name" title="Copy">ðŸ“‹</button>
            </div>
            <div class="details-row">
              <span class="detailsLabel" id="email">Email: None</span>
              <button class="copy-btn" data-copy-target="email" title="Copy">ðŸ“‹</button>
            </div>
            <div class="details-row">
              <span class="detailsLabel" id="contact">Contact Number: None</span>
              <button class="copy-btn" data-copy-target="contact" title="Copy">ðŸ“‹</button>
            </div>
            <div class="details-row">
              <span class="detailsLabel" id="professionPosition">Profession/Position: None</span>
              <button class="copy-btn" data-copy-target="professionPosition" title="Copy">ðŸ“‹</button>
            </div>
            <div class="details-row">
              <span class="detailsLabel" id="address">Address: None</span>
              <button class="copy-btn" data-copy-target="address" title="Copy">ðŸ“‹</button>
            </div>
          </div>
          <div class="add-contact-container" id="addContactContainer" style="display: none;">
            <button class="add-contact-btn" id="addContactBtn">
              <span class="btn-icon">ðŸ‘¤</span>
              <span class="btn-text">Add to Contacts</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const scannerSection = document.getElementById('scannerInlineSection');
        const showScannerMenuBtn = document.getElementById('showScannerMenuBtn');
        const hideScannerBtn = document.getElementById('hideScannerBtn');

        // Show scanner section as fullscreen overlay
        showScannerMenuBtn.addEventListener('click', function (event) {
            event.preventDefault();
            scannerSection.style.display = 'block';
            document.body.style.overflow = 'hidden'; // Prevent background scroll
        });

        // Hide scanner section and restore scroll
        hideScannerBtn.addEventListener('click', function () {
            scannerSection.style.display = 'none';
            document.body.style.overflow = '';
        });
    });
</script>
</body>
</html>